// Stream Api and Function Basic to Advance 
// apply()
// andThen()
// compose()
// identity()

// Use Case 1: Find all even numbers and square them
import java.util.List;
import java.util.Arrays;
import java.util.stream.*;
class Main {
    public static void main(String[] args) {
        List<Integer> numbers = Arrays.asList(21,22,23,24,25,26);
        numbers.stream().filter(n->n%2==0)
        .map(n->n*n)
        .forEach(System.out::println);
        // .collect(Collectors.toList());
    }
}

//Use Case 2: find the duplicates in the list

import java.util.List;
import java.util.Arrays;
import java.util.Map;
import java.util.function.Function;
import java.util.stream.*;

class Main {
    public static void main(String[] args) {
        List<Integer> duplicates = Arrays.asList(1,2,3,2,4,3,5);
         duplicates.stream()
        .collect(Collectors.groupingBy(Function.identity(),Collectors.counting()))
        .entrySet().stream()
        .filter(n->n.getValue()>1)
        .map(Map.Entry::getKey)
        .forEach(System.out::println);
        // .collect(Collectors.toList());
    }
}

//Use Case 3: Find first non-repeated character in a string
import java.util.List;
import java.util.Arrays;
import java.util.Map;
import java.util.LinkedHashMap;
import java.util.function.Function;
import java.util.stream.*;
import java.lang.Character;

class Main {
    public static void main(String[] args) {
       String input = "Madam";
       Character uniqueChar = input.chars()
       .mapToObj(c->(char)c)
       .collect(Collectors.groupingBy(Function.identity(), LinkedHashMap:: new, Collectors.counting()))
       .entrySet().stream()
       .filter(e -> e.getValue() == 1)
       .map(Map.Entry::getKey)
       .findFirst()
       .orElse(null);
        System.out.println(uniqueChar);
    }
}

//Use Case 4: Find second highest number in Array
import java.util.Comparator;
import java.util.stream.*;
class Main {
    public static void main(String[] args) {
        int[] arr = {10, 20, 50, 30, 40};
        int secondBigNum = Arrays.stream(arr)
        .boxed()
        .sorted(Comparator.reverseOrder())
        .skip(1)
        .findFirst()
        .orElseThrow();
        System.out.println(secondBigNum);
    }
}

//Use Case 5: Count the word occurance
import java.util.List;
import java.util.Arrays;
import java.util.function.Function;

import java.util.Comparator;
import java.util.stream.*;

class Main {
    public static void main(String[] args) {
        List<String> words = Arrays.asList("java", "spring", "java", "boot");
       Map<String, Long> countMap = words.stream()
        .collect(Collectors.groupingBy(Function.identity(), Collectors.counting()));
        System.out.println(countMap);
    }
}


